<blockquote>
  <p>개인공부 후 자료를 남기기 위한 목적임으로 내용 상에 오류가 있을 수 있습니다.</p>
</blockquote>

<h2 id="소켓-socket">소켓 (socket)</h2>

<ul>
  <li>소켓 : 소켓을 생성한다는 의미는 호스트가 통신을 하기 위해 필요한 리소스를 할당 한다는 의미</li>
  <li>소켓의 선언 : python의 소켓은 C나 자바에 비해 비교적 단순한 모습을 취하고 있음</li>
</ul>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</code></pre>
</div>

<h2 id="af주소-체계">AF(주소 체계)</h2>
<ul>
  <li>AF_INET - IPv4 프로토콜</li>
  <li>AF_INET6 - IPv6 프로토콜</li>
  <li>AF_LOCAL - Local 통신 UNIX 프로토콜</li>
</ul>

<h2 id="client">Client</h2>
<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">socket</span>


<span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="n">host</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">()</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">12222</span>

<span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span> <span class="s">'Connected to'</span><span class="p">,</span> <span class="n">host</span><span class="p">)</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">z</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter something for the server: "</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">))</span>
    <span class="c"># Halts</span>
    <span class="k">print</span> <span class="p">(</span><span class="s">'[Waiting for response...]'</span><span class="p">)</span>
    <span class="k">print</span> <span class="p">((</span><span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">))</span>

</code></pre>
</div>

<h2 id="server">Server</h2>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">socket</span>


<span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="n">host</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">()</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">12222</span>
<span class="n">s</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_REUSEADDR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>

<span class="n">s</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="bp">None</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
   <span class="k">if</span> <span class="n">c</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
       <span class="c"># Halts</span>
       <span class="k">print</span><span class="p">(</span> <span class="s">'[Waiting for connection...]'</span><span class="p">)</span>
       <span class="n">c</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span> <span class="c">#  (socket object, address info) return</span>
       <span class="k">print</span><span class="p">(</span> <span class="s">'Got connection from'</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
   <span class="k">else</span><span class="p">:</span>
       <span class="c"># Halts</span>
       <span class="k">print</span><span class="p">(</span> <span class="s">'[Waiting for response...]'</span><span class="p">)</span>
       <span class="k">print</span><span class="p">((</span><span class="n">c</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">))</span>
       <span class="n">q</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter something to this client: "</span><span class="p">)</span>
       <span class="n">c</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">q</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">))</span>

</code></pre>
</div>
